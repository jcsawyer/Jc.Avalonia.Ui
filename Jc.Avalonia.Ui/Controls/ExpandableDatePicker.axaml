<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:sys="using:System"
                    x:ClassModifier="internal">
    <Design.PreviewWith>
        <Border Padding="20" Height="500">
            <StackPanel VerticalAlignment="Center">
                <ExpandableDatePicker />
                <ExpandableDatePicker CornerRadius="10" />
                <ExpandableDatePicker IsEnabled="False" />
                <ExpandableDatePicker>
                    <DataValidationErrors.Error>
                        <sys:Exception>
                            <x:Arguments>
                                <x:String>Error</x:String>
                            </x:Arguments>
                        </sys:Exception>
                    </DataValidationErrors.Error>
                </ExpandableDatePicker>
            </StackPanel>
        </Border>
    </Design.PreviewWith>

    <!-- <ControlTheme x:Key="FluentDatePickerFlyoutButton" TargetType="Button"> -->
    <!--     <Setter Property="RenderTransform" Value="none" /> -->
    <!--     <Setter Property="Template"> -->
    <!--         <ControlTemplate> -->
    <!--             <ContentPresenter Name="PART_ContentPresenter" -->
    <!--                               Background="{DynamicResource ButtonBackground}" -->
    <!--                               Padding="10 10" -->
    <!--                               Margin="10" -->
    <!--                               BorderThickness="{TemplateBinding BorderThickness}" -->
    <!--                               Content="{TemplateBinding Content}" -->
    <!--                               Foreground="{TemplateBinding Foreground}" -->
    <!--                               HorizontalAlignment="Stretch" -->
    <!--                               HorizontalContentAlignment="Stretch" -->
    <!--                               VerticalContentAlignment="Stretch" -->
    <!--                               CornerRadius="{TemplateBinding CornerRadius}" /> -->
    <!--         </ControlTemplate> -->
    <!--     </Setter> -->
    <!-- -->
    <!--     <Style Selector="^:pressed"> -->
    <!--         <Setter Property="RenderTransform" Value="scale(0.98)" /> -->
    <!--     </Style> -->
    <!-- -->
    <!--     <Style Selector="^:pressed /template/ ContentPresenter#PART_ContentPresenter"> -->
    <!--         <Setter Property="Background" Value="{DynamicResource DatePickerButtonBackgroundPressed}" /> -->
    <!--         <Setter Property="Foreground" Value="{DynamicResource DatePickerButtonForegroundPressed}" /> -->
    <!--     </Style> -->
    <!-- -->
    <!--     <Style Selector="^:disabled /template/ ContentPresenter#PART_ContentPresenter"> -->
    <!--         <Setter Property="BorderBrush" Value="{DynamicResource DatePickerButtonBorderBrushDisabled}" /> -->
    <!--         <Setter Property="Background" Value="{DynamicResource DatePickerButtonBackgroundDisabled}" /> -->
    <!--         <Setter Property="Foreground" Value="{DynamicResource DatePickerButtonForegroundDisabled}" /> -->
    <!--     </Style> -->
    <!-- </ControlTheme> -->
    <!-- -->
    <ControlTheme x:Key="{x:Type ExpandableDatePicker}" TargetType="ExpandableDatePicker">
        <Setter Property="Foreground" Value="{DynamicResource DatePickerButtonForeground}" />
        <Setter Property="Background" Value="{DynamicResource DatePickerButtonBackground}" />
        <Setter Property="MaxDropDownHeight" Value="304" />
        <Setter Property="BorderBrush" Value="{DynamicResource DatePickerButtonBorderBrush}" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="CornerRadius" Value="{DynamicResource ControlCornerRadius}" />
        <Setter Property="HorizontalAlignment" Value="Stretch"></Setter>
        <Setter Property="VerticalAlignment" Value="Center" />
        <Setter Property="Margin" Value="10"></Setter>
        <Setter Property="Template">
            <ControlTemplate>
                <DataValidationErrors>
                    <Grid Name="LayoutRoot" Margin="{TemplateBinding Padding}">
                        <ExpanderlessExpander Name="PART_Popup"
                                  IsExpanded="{TemplateBinding IsDropDownOpen, Mode=TwoWay}"
                                  MinWidth="{Binding Bounds.Width, RelativeSource={RelativeSource TemplatedParent}}"
                                  MaxHeight="{TemplateBinding MaxDropDownHeight}">
                            <ExpanderlessExpander.Header>
                                <Grid Name="PART_ButtonContentGrid"
                                      IsEnabled="{TemplateBinding IsEnabled}"
                                      MinWidth="{DynamicResource DatePickerThemeMinWidth}"
                                      MaxWidth="{DynamicResource DatePickerThemeMaxWidth}"
                                      HorizontalAlignment="Stretch"
                                      VerticalAlignment="Stretch"
                                      TemplatedControl.IsTemplateFocusTarget="True"
                                      ColumnDefinitions="78*,Auto,132*,Auto,78*">
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Name="PART_DayTextBlock" Height="14" FontSize="14"
                                                   Margin="{DynamicResource DatePickerHostMonthPadding}">
                                        </TextBlock>
                                        <TextBlock Text="{DynamicResource StringDatePickerDayText}"
                                                   HorizontalAlignment="Left"
                                                   Padding="{DynamicResource DatePickerHostPadding}" FontSize="12"
                                                   Foreground="{DynamicResource TextControlPlaceholderForeground}" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="2">
                                        <TextBlock Name="PART_MonthTextBlock" Height="14" FontSize="14"
                                                   Margin="{DynamicResource DatePickerHostMonthPadding}">
                                        </TextBlock>
                                        <TextBlock Text="{DynamicResource StringDatePickerMonthText}"
                                                   TextAlignment="Left"
                                                   Padding="{DynamicResource DatePickerHostMonthPadding}"
                                                   FontSize="12"
                                                   Foreground="{DynamicResource TextControlPlaceholderForeground}" />
                                    </StackPanel>
                                    <StackPanel Grid.Column="4">
                                        <TextBlock Name="PART_YearTextBlock" Height="14" FontSize="14"
                                                   Margin="{DynamicResource DatePickerHostMonthPadding}">
                                        </TextBlock>
                                        <TextBlock Text="{DynamicResource StringDatePickerYearText}"
                                                   HorizontalAlignment="Left"
                                                   Padding="{DynamicResource DatePickerHostPadding}" FontSize="12"
                                                   Foreground="{DynamicResource TextControlPlaceholderForeground}" />
                                    </StackPanel>
                                    <Rectangle x:Name="PART_FirstSpacer"
                                               Fill="{DynamicResource DatePickerSpacerFill}"
                                               HorizontalAlignment="Center"
                                               Width="1"
                                               Grid.Column="1" />
                                    <Rectangle x:Name="PART_SecondSpacer"
                                               Fill="{DynamicResource DatePickerSpacerFill}"
                                               HorizontalAlignment="Center"
                                               Width="1"
                                               Grid.Column="3" />
                                </Grid>
                            </ExpanderlessExpander.Header>
                            <Border x:Name="PopupBorder"
                                    Background="{DynamicResource ComboBoxDropDownBackground}"
                                    BorderBrush="{DynamicResource ComboBoxDropDownBorderBrush}"
                                    BorderThickness="{DynamicResource ComboBoxDropdownBorderThickness}"
                                    Padding="{DynamicResource ComboBoxDropdownBorderPadding}"
                                    HorizontalAlignment="Stretch"
                                    CornerRadius="0 0 10 10"
                                    BackgroundSizing="InnerBorderEdge">
                                <ExpandableDatePickerPresenter Name="PART_PickerPresenter" />
                            </Border>
                        </ExpanderlessExpander>
                    </Grid>
                </DataValidationErrors>
            </ControlTemplate>
        </Setter>

        <Style Selector="^:disabled /template/ Rectangle">
            <Setter Property="Fill" Value="{DynamicResource DatePickerSpacerFillDisabled}" />
        </Style>

        <Style Selector="^ /template/ Expander#PART_Popup ToggleButton#ExpanderHeader Border#ExpandCollapseChevronBorder">
            <Setter Property="IsVisible" Value="False"></Setter>
        </Style>
    </ControlTheme>
    
    <!--WinUI: DatePickerFlyoutPresenter-->
    <ControlTheme x:Key="{x:Type ExpandableDatePickerPresenter}" TargetType="ExpandableDatePickerPresenter">
        <Setter Property="MinWidth" Value="296" />
        <Setter Property="MaxHeight" Value="500" />
        <Setter Property="Padding" Value="0"></Setter>
        <Setter Property="Template">
            <ControlTemplate>
                <Grid Name="PART_ButtonContentGrid" RowDefinitions="* Auto">
                    <Grid Name="PART_PickerContainer"
                          Grid.Row="0"
                          IsEnabled="{TemplateBinding IsEnabled}"
                          MinWidth="{DynamicResource DatePickerThemeMinWidth}"
                          MaxWidth="{DynamicResource DatePickerThemeMaxWidth}"
                          HorizontalAlignment="Stretch"
                          VerticalAlignment="Stretch"
                          ColumnDefinitions="78*,Auto,132*,Auto,78*">
                        <!--Column Definitions set in code, ignore here-->
                        <Panel Grid.Column="0" Name="PART_DayHost">
                            <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                          VerticalScrollBarVisibility="Hidden">
                                <DateTimePickerPanel Name="PART_DaySelector"
                                                     PanelType="Day"
                                                     ItemHeight="{DynamicResource DatePickerFlyoutPresenterItemHeight}"
                                                     ShouldLoop="True" />
                            </ScrollViewer>
                        </Panel>
                            <Panel Grid.Column="2" Name="PART_MonthHost">
                                <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                              VerticalScrollBarVisibility="Hidden">
                                    <DateTimePickerPanel Name="PART_MonthSelector"
                                                         PanelType="Month"
                                                         ItemHeight="{DynamicResource DatePickerFlyoutPresenterItemHeight}"
                                                         ShouldLoop="True" />
                                </ScrollViewer>
                            </Panel>
                            <Panel Grid.Column="4" Name="PART_YearHost">
                                <ScrollViewer HorizontalScrollBarVisibility="Disabled"
                                              VerticalScrollBarVisibility="Hidden">
                                    <DateTimePickerPanel Name="PART_YearSelector"
                                                         PanelType="Year"
                                                         ItemHeight="{DynamicResource DatePickerFlyoutPresenterItemHeight}"
                                                         ShouldLoop="False" />
                                </ScrollViewer>
                            </Panel>
                        </Grid>
                        <Rectangle Grid.Row="0" Fill="{DynamicResource DatePickerButtonBackground}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Height="40"></Rectangle>
    
                        <Grid Name="AcceptDismissGrid"
                              Grid.Row="1"
                              ColumnDefinitions="*,*">
                            <Rectangle Height="{DynamicResource DatePickerSpacerThemeWidth}"
                                       VerticalAlignment="Top"
                                       Fill="{DynamicResource DatePickerFlyoutPresenterSpacerFill}"
                                       Grid.ColumnSpan="2" />
                            <Button Name="PART_AcceptButton"
                                    Grid.Column="0"
                                    Theme="{StaticResource FluentDateTimePickerButton}"
                                    Height="{DynamicResource DatePickerFlyoutPresenterAcceptDismissHostGridHeight}"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch">
                                <Path Stroke="{Binding $parent[Button].Foreground}"
                                      StrokeLineCap="Round"
                                      StrokeThickness="0.75"
                                      Data="M0.5,8.5 5,13.5 15.5,3" />
                            </Button>
                            <Button Name="PART_DismissButton"
                                    Grid.Column="1"
                                    Theme="{StaticResource FluentDateTimePickerButton}"
                                    Height="{DynamicResource DatePickerFlyoutPresenterAcceptDismissHostGridHeight}"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Stretch">
                                <Path Stroke="{Binding $parent[Button].Foreground}"
                                      StrokeLineCap="Round"
                                      StrokeThickness="0.75"
                                      Data="M2,2 14,14 M2,14 14 2" />
                            </Button>
                        </Grid>
                    </Grid>
            </ControlTemplate>
        </Setter>
    
        <Style Selector="^ /template/ Panel">
            <Style Selector="^:pointerover RepeatButton">
                <Setter Property="IsVisible" Value="True" />
            </Style>
        </Style>
        
        <Style Selector="^ /template/ ListBoxItem">
            <Setter Property="Padding" Value="0"></Setter>
        </Style>
    </ControlTheme>


</ResourceDictionary>